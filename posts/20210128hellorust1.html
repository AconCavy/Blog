<!DOCTYPE html>

<html lang="ja">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline';
img-src 'self' * data: *.w3.org; 
child-src 'none';
frame-src 'self' *.twitter.com;
font-src 'self' *.fontawesome.com *.typekit.net;
connect-src 'self' *.fontawesome.com *.typekit.net; style-src 'self' 'unsafe-inline' stackpath.bootstrapcdn.com;
script-src 'self' 'unsafe-eval' cdn.jsdelivr.net stackpath.bootstrapcdn.com *.fontawesome.com cdnjs.cloudflare.com *.twitter.com *.typekit.net;">

    <link rel="icon" href="/Blog/assets/favicon.ico"/>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="/Blog/css/style.css" type="text/css">

    <title>acon.log - Rust&#x306E;&#x304A;&#x52C9;&#x5F37;&#x30E1;&#x30E2;1 (&#x30C4;&#x30FC;&#x30EB; | &#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x306E;&#x6982;&#x5FF5;)</title>

    
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="acon.log">
<meta property="og:title" content="Rust&#x306E;&#x304A;&#x52C9;&#x5F37;&#x30E1;&#x30E2;1 (&#x30C4;&#x30FC;&#x30EB; | &#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x306E;&#x6982;&#x5FF5;)">
<meta property="og:description" content="">
<meta property="og:image" content="https://aconcavy.github.io/Blog/assets/icon.webp">
<meta property="og:url" content="/Blog/posts/20210128hellorust1">

    <script src="/Blog/js/adobe_fonts.js"></script>

</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow-sm" id="mainNav">
    <div class="container">
        <a class="navbar-brand" href="/Blog/">acon.log</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
    <li class="nav-item">
        <a class="nav-link" href="/Blog/posts">Posts</a>
    </li>
</ul>
        </div>
    </div>
</nav>

<header>
</header>

<div class="container">
    <div class="row">
        <div id="content">

                <div class="card shadow-sm">
                    <div class="card-body p-md-5">
                        
<div class="post-header">
    <div class="row">
        <div class="col-md-12">
            <h1 class="card-title">Rust&#x306E;&#x304A;&#x52C9;&#x5F37;&#x30E1;&#x30E2;1 (&#x30C4;&#x30FC;&#x30EB; | &#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x306E;&#x6982;&#x5FF5;)</h1>

            <div class="card-text post-meta">Published on Thursday, 28 January 2021</div>
            <div class="card-text post-meta">Updated on Tuesday, 02 February 2021</div>

                <div class="mt-3">
                        <a href="/Blog/tags/rust" class="badge badge-light"> Rust</a>
                </div>
        </div>
    </div>
</div>

<hr>

                        <div class="post-body">
                            <h1 id="section">はじめに</h1>
<p><a href="https://doc.rust-jp.rs/book-ja/">The Rust Programming Language 日本語版</a> で学んだことのメモ1です。</p>
<ul>
<li>メモ1 (ここ)</li>
<li><a href="20210128hellorust2">メモ2</a></li>
<li><a href="20210128hellorust3">メモ3</a></li>
<li><a href="20210129hellorust4">メモ4</a></li>
<li><a href="20210129hellorust5">メモ5</a></li>
<li><a href="20210130hellorust6">メモ6</a></li>
<li><a href="20210130hellorust7">メモ7</a></li>
</ul>
<p><a href="https://github.com/AconCavy/hello_rust">リポジトリ</a> (12章以降)</p>
<h1 id="section-1">ツール</h1>
<h2 id="rustup">rustup</h2>
<p>Rustのバージョンと関連するツールと管理するツール。</p>
<h3 id="section-2">更新</h3>
<pre><code class="line-numbers">rustup update
</code></pre>
<h2 id="rustc">rustc</h2>
<p>コンパイラ。</p>
<h3 id="section-3">個別ファイルのコンパイル</h3>
<pre><code class="line-numbers">rustc main.rs
</code></pre>
<h2 id="rustfmt">rustfmt</h2>
<p>フォーマッタ。</p>
<h2 id="cargo">Cargo</h2>
<p>ビルドシステム、パッケージマネージャ。</p>
<h3 id="section-4">プロジェクト作成</h3>
<pre><code class="line-numbers">cargo new hello --bin
</code></pre>
<h3 id="cargo.toml">Cargo.toml</h3>
<p>Cargoの設定フォーマット。</p>
<ul>
<li><code>[package]</code>: パッケージの設定</li>
<li><code>[dependencies]</code>: プロジェクトの依存関係</li>
</ul>
<p><code>src</code> ディレクトリにコード、 <code>root</code> に <code>Cargo.toml</code> 。</p>
<h3 id="section-5">プロジェクトのビルド</h3>
<pre><code class="line-numbers">cargo build
</code></pre>
<h3 id="cargo.lock">Cargo.lock</h3>
<p>Cargoが生成するファイル。プロジェクト依存関係の正確なバージョンを管理する。手動で変更してはいけない。</p>
<h3 id="section-6">プロジェクトの実行</h3>
<pre><code class="line-numbers">cargo run
</code></pre>
<h3 id="section-7">プロジェクトのビルド (バイナリ生成なし)</h3>
<p>バイナリを生成しないので、ビルドの確認を高速化できる。</p>
<pre><code class="line-numbers">cargo check
</code></pre>
<h3 id="section-8">リリースビルド</h3>
<pre><code class="line-numbers">cargo build --release
</code></pre>
<h1 id="section-9">プログラミングの概念</h1>
<h2 id="section-10">変数と可変性</h2>
<h3 id="section-11">変数</h3>
<p>Rustでは、<code>let</code> キーワードで変数を宣言でき、型推論をしてくれるため、型注釈を省略できる。また、変数に <code>mut</code> キーワードを付けることで、変更可能な変数として扱うことができる。</p>
<pre><code class="language-rust line-numbers">let x = 5; // 不変変数 (let x: i32 = 5)
x = 6 // NG
</code></pre>
<pre><code class="language-rust line-numbers">let mut x = 5 // 変数
x = 6 // OK
</code></pre>
<h3 id="section-12">定数</h3>
<p>型注釈が必須.</p>
<pre><code class="language-rust line-numbers">const MAX: u32 = 1000;
</code></pre>
<h3 id="section-13">シャドーイング</h3>
<p>前に定義した変数と同じ名前の変数を新しく宣言できる。新しい変数を生成するため、型が異なってもOK。</p>
<pre><code class="language-rust line-numbers">let x = 5;
let x = x + 1; // OK 6
let x = x * 2; // OK 12
</code></pre>
<pre><code class="language-rust line-numbers">let spaces = &quot;   &quot;;
let spaces = spaces.len(); // OK
</code></pre>
<pre><code class="language-rust line-numbers">let mut spaces = &quot;   &quot;;
spaces = spaces.len(); // NG
</code></pre>
<h2 id="section-14">データ型</h2>
<p>Rustにおける値は全て、何らかのデータ型である。</p>
<p>静的型付き言語のため、コンパイル時にすべての変数の型が判明している必要がある。</p>
<p>例えば、<code>String</code>を数値型に変換した場合など、変換先が複数存在する場合は型注釈をつける必要がある。</p>
<pre><code class="language-rust line-numbers">let x: u32 = &quot;42&quot;.parse().expect(&quot;Not a number!&quot;);
</code></pre>
<h3 id="section-15">スカラー型</h3>
<ul>
<li>整数</li>
<li>浮動小数点数</li>
<li>論理値</li>
<li>文字</li>
</ul>
<h4 id="section-16">整数型</h4>
<p>サイズごとに符号付きと符号なしの整数値の型が存在する。整数型のデフォルトは <code>i32</code> 型。
<code>isize</code> と <code>usize</code> はCPUのアーキテクチャによって可変し、64ビットアーキテクチャなら64ビット、32ビットアーキテクチャなら32ビットになる。</p>
<div class="table-responsive">
<table class="table">
<thead>
<tr>
<th style="text-align: left;">サイズ</th>
<th style="text-align: left;">符号付き</th>
<th style="text-align: left;">符号なし</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">8-bit</td>
<td style="text-align: left;"><code>i8</code></td>
<td style="text-align: left;"><code>u8</code></td>
</tr>
<tr>
<td style="text-align: left;">16-bit</td>
<td style="text-align: left;"><code>i16</code></td>
<td style="text-align: left;"><code>u16</code></td>
</tr>
<tr>
<td style="text-align: left;">32-bit</td>
<td style="text-align: left;"><code>i32</code></td>
<td style="text-align: left;"><code>u32</code></td>
</tr>
<tr>
<td style="text-align: left;">64-bit</td>
<td style="text-align: left;"><code>i64</code></td>
<td style="text-align: left;"><code>u64</code></td>
</tr>
<tr>
<td style="text-align: left;">arch</td>
<td style="text-align: left;"><code>isize</code></td>
<td style="text-align: left;"><code>usize</code></td>
</tr>
</tbody>
</table>
</div>
<p>バイトリテラルを覗く数値リテラルすべて、型接尾辞と <code>_</code> を見た目の区切り記号に付加することができる。</p>
<div class="table-responsive">
<table class="table">
<thead>
<tr>
<th style="text-align: left;">数値リテラル</th>
<th style="text-align: left;">例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">10進数</td>
<td style="text-align: left;"><code>10_000</code></td>
</tr>
<tr>
<td style="text-align: left;">16進数</td>
<td style="text-align: left;"><code>0xff</code></td>
</tr>
<tr>
<td style="text-align: left;">8進数</td>
<td style="text-align: left;"><code>0o77</code></td>
</tr>
<tr>
<td style="text-align: left;">2進数</td>
<td style="text-align: left;"><code>0b1111_0000</code></td>
</tr>
<tr>
<td style="text-align: left;">バイト</td>
<td style="text-align: left;"><code>b'A'</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="section-17">浮動小数点型</h4>
<p><code>f32</code> と <code>f64</code> が存在する。浮動小数点型のデフォルトは <code>f64</code> 型。</p>
<pre><code class="language-rust line-numbers">let x = 2.0; // f64
let x: f32 = 2.0; // f32
</code></pre>
<h4 id="section-18">整数演算</h4>
<pre><code class="language-rust line-numbers">let add = 5 + 10;
let sub = 95.3 - 4.3;
let mul = 4 * 30;
let div = 56.7 / 32.2;
let rem = 43 % 5; 
</code></pre>
<h4 id="section-19">論理値型</h4>
<p><code>true</code> と <code>false</code> が存在する。</p>
<pre><code class="language-rust line-numbers">let t = true;
let f: bool = false;
</code></pre>
<h4 id="section-20">文字型</h4>
<p><code>char</code> が存在する。ユニコードのスカラー値 (<code>U+0000</code> から <code>U+D4FF</code> までと <code>U+E000</code> から <code>U+10FFFF</code> まで) を表す。シングルクォートで指定する。</p>
<pre><code class="language-rust line-numbers">let c = 'z';
let cat = '😻';
</code></pre>
<h3 id="section-21">複合型</h3>
<ul>
<li>タプル</li>
<li>配列</li>
</ul>
<h4 id="section-22">タプル型</h4>
<p>複数の型の何らかの値を一つの複合型にまとめ上げられる。
それぞれに変数名を与えることができたり、添え字にによってタプルの要素を参照できる。</p>
<pre><code class="language-rust line-numbers">let tuple: (i32, f64, u8) = (500, 6.4, 1);
let tuple = (500, 6.4, 1);
let (x, y, z) = tuple;

println!(&quot;{}, {}&quot;, x, tuple.0);
// #=&gt; 500, 500
</code></pre>
<h4 id="section-23">配列型</h4>
<p>複数の値のコレクションを得ることができる。配列の全要素は同じ型でなければならない。</p>
<p>固定長で、一度宣言されたらサイズの変更はできない。可変長のコレクション型を使いたい場合はベクタ型を使用する。</p>
<p>添え字によって配列の要素を参照できる。</p>
<pre><code class="language-rust line-numbers">let a = [1, 2, 3, 4, 5];
println!(&quot;{}&quot;, a[0]); // OK
println!(&quot;{}&quot;, a[10]); // NG 範囲外
</code></pre>
<h2 id="section-24">関数</h2>
<p><code>fn</code> キーワードで宣言することができる。</p>
<p>関数と変数の命名規則はスネークケース。</p>
<pre><code class="language-rust line-numbers">fn main() {
    greeting();
    print_value(1);
    print_values(1, 2);

    // #=&gt; Hello!
    // #=&gt; 1
    // #=&gt; 1, 2
}

fn greeting() {
    println!(&quot;Hello!&quot;);
}

fn print_value(x: i32) {
    println!(&quot;{}&quot;, x);
}

fn print_values(x: i32, y: i32) {
    println!(&quot;{}, {}&quot;, x, y);
}
</code></pre>
<h3 id="section-25">文と式</h3>
<p>関数本体は、文が並び、最後に式を置くか分を置くという形で形成される。</p>
<div class="table-responsive">
<table class="table">
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: left;">特徴</th>
<th style="text-align: left;">終端セミコロン</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">文</td>
<td style="text-align: left;">何らかの動作をして値を返さない命令</td>
<td style="text-align: left;">含む</td>
</tr>
<tr>
<td style="text-align: left;">式</td>
<td style="text-align: left;">結果値に評価される</td>
<td style="text-align: left;">含まない</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="language-rust line-numbers">fn main() {
    let x = 5; // 文
    let y = {
        let x = 3; // 文
        x + 1 // 式
    }

    println!(&quot;{}, {}&quot;, x, y);
    // #=&gt; 5, 4
}
</code></pre>
<h3 id="section-26">戻り値のある関数</h3>
<p>矢印の後に型を書いて宣言する。関数本体ブロックの最後の式の値と同義である。 <code>return</code> キーワードで早期リターンも可能。</p>
<pre><code class="language-rust line-numbers">fn five() -&gt; i32 {
    5 // 式なのでセミコロンはなし
}

fn plus_one_ok(x: i32) -&gt; i32 {
    x + 1 // OK 文になるのでエラーになる
}

fn plus_one_ng(x: i32) -&gt; i32 {
    x + 1; // NG 文になって()が返るのでエラーになる
}
</code></pre>
<h2 id="section-27">フロー制御</h2>
<p><code>if</code> 式とループが存在する。</p>
<h3 id="if">if式</h3>
<p><code>if</code> 式の条件式と紐づけられる一連のコードは、時として<strong>アーム</strong>と呼ばれることがある。</p>
<pre><code class="language-rust line-numbers">let x = 3;

if x &lt; 5 {
    println!(&quot;true&quot;);
} else {
    println!(&quot;false&quot;);
}

if x { // 数値型ではダメ 論理値型のみ
    println!(&quot;error&quot;);
}

if x % 4 == 0 {
    println!(&quot;x / 4 rem 0&quot;);
} else if x % 3 == 0 {
    println!(&quot;x / 3 rem 0&quot;);
} else if x % 2 == 0 {
    println!(&quot;x / 2 rem 0&quot;);
} else {
    println!(&quot;other&quot;);
}
</code></pre>
<p><code>else if</code> 多用する場合は、<code>match</code>と呼ばれる枝分かれ文法が使える。</p>
<h4 id="letif">let文内でのif式</h4>
<p><code>if</code> は式なので、<code>let</code> 文の右辺に持ってくることができる。全ての条件分岐で同じ型である必要がある。</p>
<pre><code class="language-rust line-numbers">let cond = true;
let x = if cond { 5 } else { 6 };
println!(&quot;{}&quot;, x);
// #=&gt; 5

let y = if cond { 5 } else { &quot;six&quot; }; // NG
</code></pre>
<h3 id="section-28">ループでの繰り返し</h3>
<p><code>loop</code> 、 <code>while</code> 、 <code>for</code> の3種類のループが存在する。</p>
<h4 id="loop">loop</h4>
<p><code>loop</code> キーワードでは、同じコードを何回も永遠に、明示的に辞めさせるまで実行される。</p>
<pre><code class="language-rust line-numbers">loop { // 無限ループ
    println!(&quot;Hello!&quot;);
}

let mut x = 5;
loop {
    if x == 0 {
        break;
    }
    x = x - 1;
    println!(&quot;Hello!&quot;);
}
</code></pre>
<h4 id="while">while</h4>
<p><code>while</code> キーワードでは、条件を指定できる。</p>
<pre><code class="language-rust line-numbers">let mut x = 5;
while x != 0 {
    x = x - 1;
    println!(&quot;Hello!&quot;);
}
</code></pre>
<h4 id="for">for</h4>
<p><code>for</code> でコレクションの各アイテムに対してコードを実行することができる。</p>
<pre><code class="language-rust line-numbers">let a = [1, 2, 3, 4, 5];
for x in a.iter() {
    println!(&quot;{}&quot;, x);
}
</code></pre>
<p><code>Range</code> 型を使うことで、回数ループができる。<code>rev</code> メソッドで逆順も可能。</p>
<pre><code class="language-rust line-numbers">for x in 1..4 {
    println!(&quot;{}&quot;, x);
}

for x in (1..4).rev() {
    println!(&quot;{}&quot;, x);
}
</code></pre>

                        </div>
                        <div class="post-footer mt-5">
    <div class="share">
        <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" url="/Blog/posts/20210128hellorust1" data-size="large">
            Tweet
        </a>
    </div>

    <hr>

    <div class="row justify-content-center m-3 about">
        <div class="col-md-3 mt-3">
            <img class="rounded-circle" src="/Blog/assets/icon.webp" alt="icon"/>
        </div>
        <div class="col-md-3 mt-3">
            <div class="col">
                <h5>AconCavy</h5>
                <div class="profile">
                    C#が好きなひきニート
                </div>
            </div>
            <div class="col">
                <a class="nav-link fab fa-twitter fa-2x" href="https://twitter.com/AconCavy"></a>
                <a class="nav-link fab fa-github fa-2x" href="https://github.com/AconCavy"></a>
            </div>
        </div>
    </div>
</div>
                    </div>
                </div>

        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <p>Copyright &#xA9; 2020-2021 AconCavy</p>
                <ul class="list-inline text-center small">
                        <li class="list-inline-item">
                            <a href="/Blog/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        </li>
                        <li class="list-inline-item">
                            <a href="/Blog/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>

<script src="https://kit.fontawesome.com/defa8b99ee.js" crossorigin="anonymous"></script>

<script src="/Blog/prism/prism.js"></script>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</body>

</html>